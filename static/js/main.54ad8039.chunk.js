(this["webpackJsonpblog-client"]=this["webpackJsonpblog-client"]||[]).push([[0],{225:function(t,e,n){},227:function(t,e,n){},241:function(t,e){},243:function(t,e){},248:function(t,e){},249:function(t,e){},276:function(t,e){},278:function(t,e){},288:function(t,e){},290:function(t,e){},300:function(t,e){},302:function(t,e){},316:function(t,e){},350:function(t,e){},351:function(t,e){},421:function(t,e){},423:function(t,e){},428:function(t,e){},430:function(t,e){},437:function(t,e){},449:function(t,e){},452:function(t,e){},457:function(t,e){},543:function(t,e,n){"use strict";n.r(e);var a=n(12),c=n.n(a),r=n(213),i=n.n(r),s=(n(225),n(30)),o=n(21),u=n(13),l=n.n(u),m=(n(227),n(78)),d=n(117),p=n(214),b=n.n(p);window.ethereum.request({method:"eth_requestAccounts"});var f=new b.a(window.ethereum),j=new f.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"blogs",outputs:[{internalType:"contract Blog",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"string",name:"title",type:"string"},{internalType:"string",name:"_data",type:"string"}],name:"addBlog",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"blogId",type:"uint256"},{internalType:"string",name:"comment",type:"string"}],name:"addComment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBlogs",outputs:[{components:[{internalType:"uint256",name:"index",type:"uint256"},{internalType:"string",name:"title",type:"string"},{internalType:"string",name:"data",type:"string"},{internalType:"address",name:"author",type:"address"},{internalType:"uint256",name:"totalComments",type:"uint256"}],internalType:"struct BlogFactory.ParsedBlog[]",name:"_blogs",type:"tuple[]"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"blogId",type:"uint256"}],name:"getComments",outputs:[{components:[{internalType:"uint256",name:"index",type:"uint256"},{internalType:"string",name:"comment",type:"string"},{internalType:"address",name:"commentator",type:"address"}],internalType:"struct Comment[]",name:"_comments",type:"tuple[]"}],stateMutability:"view",type:"function",constant:!0}],"0xDC96ec13B6bB11DD60CBbeb7a88cEaD8266D662D"),h=n(8),x=function(){var t=Object(a.useState)({title:"",data:""}),e=Object(o.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)([]),i=Object(o.a)(r,2),u=i[0],p=i[1],b=Object(a.useState)(!1),x=Object(o.a)(b,2),y=x[0],v=x[1];Object(a.useEffect)((function(){var t=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=p,t.next=3,f.eth.getAccounts();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var O=Object(a.useState)(""),g=Object(o.a)(O,2),w=g[0],T=g[1],C=function(t,e){c(Object(d.a)(Object(d.a)({},n),{},Object(m.a)({},t,e)))},k=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.title&&n.data&&""!==n.title&&""!==n.data){t.next=4;break}return T("Please fill all the fields"),t.abrupt("return");case 4:return v(!0),T(""),t.next=8,j.methods.addBlog(n.title,n.data).send({from:u[0]});case 8:c({title:"",data:""}),v(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),T("Error while posting blog. Please try again later.");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"createForm",children:[Object(h.jsx)("h3",{style:{width:"100%"},children:"Add new blog"}),(w||""!==w)&&Object(h.jsx)("div",{style:{color:"red"},children:w}),Object(h.jsxs)("div",{children:["Title:"," ",Object(h.jsx)("input",{type:"text",value:n.title,onChange:function(t){return C("title",t.target.value)}})]}),Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Data:"," ",Object(h.jsx)("textarea",{style:{height:"60px",width:"400px",resize:"vertical"},value:n.data,onChange:function(t){return C("data",t.target.value)}})]}),Object(h.jsx)("div",{style:{width:"100%"},children:Object(h.jsx)("button",{disabled:y,onClick:k,children:"Submit"})})]})},y=n(80),v=n(118),O=function(){var t=Object(a.useState)([]),e=Object(o.a)(t,2),n=e[0],c=e[1];Object(a.useEffect)((function(){var t=function(){var t=Object(s.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c,t.next=3,f.eth.getAccounts();case 3:return t.t1=t.sent,(0,t.t0)(t.t1),t.next=7,j.methods.getBlogs().call();case 7:e=t.sent,console.log(e),n=e.map((function(t){return{index:t[0],author:t[3],title:t[1],data:t[2],totalComments:t[4],comments:[],commentView:!1,commentText:"",disableButton:!1}})),m(n);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var r=Object(a.useState)([{index:"",author:"",title:"",data:"",totalComments:"",comments:[],commentView:!1,commentText:"",disableButton:!1}]),i=Object(o.a)(r,2),u=i[0],m=i[1],d=function(){var t=Object(s.a)(l.a.mark((function t(e,n){var a,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=Object(y.a)(u),!(c=a.slice(0))[e].commentView){t.next=6;break}c[e].comments=[],t.next=11;break;case 6:return t.next=8,j.methods.getComments(n).call();case 8:r=t.sent,console.log(r),c[e].comments=r.map((function(t){return{index:t[0],comment:t[1],commentator:t[2]}}));case 11:c[e].commentView=!c[e].commentView,m(c),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,n){return t.apply(this,arguments)}}(),p=function(){var t=Object(s.a)(l.a.mark((function t(e){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(y.a)(u),c=a.slice(0),t.prev=1,c[e].commentText&&""!==c[e].commentText){t.next=5;break}return console.log("empty cmt"),t.abrupt("return");case 5:return c[e].disableButton=!0,t.next=8,j.methods.addComment(c[e].index,c[e].commentText).send({from:n[0]});case 8:c[e].comments.push({index:"",comment:c[e].commentText,commentator:"You"}),c[e].commentText="",m(c),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),alert("Couln't add comment"),console.log(t.t0);case 17:return t.prev=17,c[e].disableButton=!1,m(c),t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[1,13,17,21]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{style:{width:"100%"},children:u.map((function(t,e){return Object(h.jsxs)("div",{className:"blogSection",children:[Object(h.jsx)("div",{className:"blogTitle",children:t.title}),Object(h.jsxs)("div",{className:"author",children:[Object(h.jsx)(v.a,{size:"20px"}),t.author]}),Object(h.jsx)("div",{className:"blogData",children:t.data}),t.totalComments>0&&Object(h.jsxs)("div",{className:"viewComments",onClick:function(){return d(e,t.index)},children:[t.commentView?"Hide all ":"View all "+t.totalComments+" ","comments"]}),Object(h.jsx)("div",{className:"commentSection",children:t.comments.map((function(t){return Object(h.jsxs)("div",{className:"comment",children:[Object(h.jsxs)("div",{className:"author",children:[Object(h.jsx)(v.a,{size:"20px"}),t.commentator]}),Object(h.jsx)("div",{className:"commentData",children:t.comment})]})}))}),Object(h.jsxs)("div",{className:"addComment",children:[Object(h.jsx)("input",{type:"text",className:"commentText",placeholder:"Type your comment",value:t.commentText,onChange:function(t){return function(t,e){var n=Object(y.a)(u).slice(0);n[t].commentText=e,m(n)}(e,t.target.value)},onKeyDown:function(t){"Enter"===t.key&&p(e)}}),Object(h.jsx)("button",{disabled:t.disableButton,onClick:function(){return p(e)},children:"Add Comment"})]})]})}))})};var g=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(""),i=Object(o.a)(r,2),u=i[0],m=i[1];return Object(a.useEffect)((function(){var t=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.ethereum){t.next=4;break}return c(!1),m("Install Metamask"),t.abrupt("return");case 4:return t.next=6,window.ethereum.request({method:"eth_requestAccounts"});case 6:0===t.sent.length?(c(!1),m("Allow permission from metamask to connect")):c(!0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),n?Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("h1",{children:"Blogs"}),Object(h.jsx)(x,{}),Object(h.jsx)("h1",{children:"All Blogs"}),Object(h.jsx)(O,{})]}):Object(h.jsx)("div",{children:u})},w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,547)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))};i.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(g,{})})),w()}},[[543,1,2]]]);